<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NYC Case Tracker v2.1</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>NYC Case Tracker v2.1</h1>
            <div class="header-actions">
                <button id="emailTodayBtn" class="btn btn-secondary">
                    <span class="icon">‚úâÔ∏è</span> Email Today's Cases
                </button>
                <button id="printTodayBtn" class="btn btn-secondary">
                    <span class="icon">üñ®Ô∏è</span> Print Today's Cases
                </button>
                <button id="addCaseBtn" class="btn btn-primary">+ Add Case</button>
            </div>
        </header>

        <div class="filters">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Search cases...">
            </div>
            <div class="filter-buttons">
                <button class="filter-btn" data-filter="active">
                    <span class="filter-icon">‚óè</span>
                    <span class="filter-label">Active</span>
                </button>
                <button class="filter-btn" data-filter="trial">
                    <span class="filter-icon">‚óè</span>
                    <span class="filter-label">Trial</span>
                </button>
                <button class="filter-btn" data-filter="warrant">
                    <span class="filter-icon">‚óè</span>
                    <span class="filter-label">Warrant</span>
                </button>
                <button class="filter-btn" data-filter="closed">
                    <span class="filter-icon">‚óè</span>
                    <span class="filter-label">Closed</span>
                </button>
            </div>
        </div>

        <div id="casesTableContainer" class="table-container">
            <table id="casesTable">
                <thead>
                    <tr>
                        <th data-sort="clientName">Client Name</th>
                        <th data-sort="indictment">Indictment #</th>
                        <th data-sort="charges">Top Charge</th>
                        <th data-sort="courtDate">Next Court Date</th>
                        <th data-sort="part">Part</th>
                        <th data-sort="status">Status</th>
                        <th data-sort="deadline3030">30.30 Deadline</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="casesTableBody">
                </tbody>
            </table>
        </div>

        <div id="mobileCardsContainer" class="mobile-cards">
        </div>

        <div id="caseModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modalTitle">Add New Case</h2>
                    <button class="close-btn">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="hero-section">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="clientName">Client Name *</label>
                                <input type="text" id="clientName" required>
                            </div>
                            <div class="form-group">
                                <label for="indictment">Indictment Number *</label>
                                <input type="text" id="indictment" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="courtDate">Next Court Date</label>
                                <input type="date" id="courtDate">
                            </div>
                            <div class="form-group">
                                <label for="part">Part</label>
                                <input type="text" id="part">
                            </div>
                            <div class="form-group">
                                <label for="onFor">On For</label>
                                <input type="text" id="onFor" placeholder="e.g., Conference, Trial">
                            </div>
                        </div>
                    </div>

                    <div id="chargesDisplaySection" class="charges-display-section" style="display: none;">
                        <h3>Charges</h3>
                        <div id="chargesDisplayList" class="charges-display-list"></div>
                    </div>

                    <div class="tabs">
                        <button class="tab-btn active" data-tab="info">Case Info</button>
                        <button class="tab-btn" data-tab="notes">Notes</button>
                        <button class="tab-btn" data-tab="todos">To-Dos</button>
                        <button class="tab-btn" data-tab="contact">Contact</button>
                    </div>

                    <div class="tab-content">
                        <div id="infoTab" class="tab-pane active">
                            <div class="form-group">
                                <label for="status">Status</label>
                                <select id="status">
                                    <option value="active">Active</option>
                                    <option value="trial">Trial</option>
                                    <option value="warrant">Warrant</option>
                                    <option value="closed">Closed</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="arraignmentDate">Arraignment Date</label>
                                <input type="date" id="arraignmentDate">
                            </div>

                            <div class="form-group" id="warrantDateGroup" style="display: none;">
                                <label for="warrantDate">Warrant Issued Date</label>
                                <input type="date" id="warrantDate">
                            </div>

                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="readinessStated">
                                    Readiness Stated
                                </label>
                            </div>

                            <div id="readinessDateGroup" class="form-group" style="display: none;">
                                <label for="readinessDate">Readiness Date</label>
                                <input type="date" id="readinessDate">
                            </div>

                            <div class="form-group">
                                <label for="chargesInput">Charges (one per line)</label>
                                <textarea id="chargesInput" rows="4" placeholder="Enter each charge on a new line"></textarea>
                            </div>

                            <div class="form-group">
                                <label for="caseNotes">Case Notes</label>
                                <textarea id="caseNotes" rows="4"></textarea>
                            </div>
                        </div>

                        <div id="notesTab" class="tab-pane">
                            <div class="notes-section">
                                <div class="notes-input-group">
                                    <textarea id="noteInput" placeholder="Add a new note..." rows="3"></textarea>
                                    <button id="addNoteBtn" class="btn btn-small">Add Note</button>
                                </div>
                                <div id="notesList" class="notes-list"></div>
                            </div>
                        </div>

                        <div id="todosTab" class="tab-pane">
                            <div class="todos-section">
                                <div class="todo-input-group">
                                    <input type="text" id="todoInput" placeholder="Add a new to-do...">
                                    <input type="date" id="todoDueDate">
                                    <button id="addTodoBtn" class="btn btn-small">Add To-Do</button>
                                </div>
                                <div id="todosList" class="todos-list"></div>
                            </div>
                        </div>

                        <div id="contactTab" class="tab-pane">
                            <div class="contact-section">
                                <h3>Phone Numbers</h3>
                                <div class="contact-input-group">
                                    <input type="tel" id="phoneInput" placeholder="Phone number">
                                    <input type="text" id="phoneNoteInput" placeholder="Note (e.g., Mother's phone - call after 6pm)">
                                    <button id="addPhoneBtn" class="btn btn-small">Add Phone</button>
                                </div>
                                <div id="phonesList" class="contact-list"></div>

                                <h3>Email Addresses</h3>
                                <div class="contact-input-group">
                                    <input type="email" id="emailInput" placeholder="Email address">
                                    <input type="text" id="emailNoteInput" placeholder="Note (e.g., Work email - check daily)">
                                    <button id="addEmailBtn" class="btn btn-small">Add Email</button>
                                </div>
                                <div id="emailsList" class="contact-list"></div>

                                <h3>Address</h3>
                                <div class="form-group">
                                    <textarea id="addressInput" rows="3" placeholder="Enter address"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="exportCalendarBtn" class="btn btn-secondary">Export to Calendar</button>
                    <button id="cancelBtn" class="btn btn-secondary">Cancel</button>
                    <button id="saveCaseBtn" class="btn btn-primary">Save Case</button>
                </div>
            </div>
        </div>

        <div id="deleteModal" class="modal">
            <div class="modal-content small">
                <div class="modal-header">
                    <h2>Confirm Delete</h2>
                    <button class="close-btn">&times;</button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete this case? This action cannot be undone.</p>
                </div>
                <div class="modal-footer">
                    <button id="cancelDeleteBtn" class="btn btn-secondary">Cancel</button>
                    <button id="confirmDeleteBtn" class="btn btn-danger">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <div id="toast" class="toast"></div>

    <script src="js/utils.js"></script>
    <script src="js/crypto.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/calculations.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/calendar.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
